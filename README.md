Описание проекта:
Вам необходимо разработать RESTful API для базового управления библиотечным
каталогом. Система должна позволять управлять информацией о книгах и читателях, а
также процессом выдачи и возврата книг, с использованием JWT для аутентификации
пользователей (библиотекарей).
Требования к функционалу:
1. Аутентификация (Новое):
○ Реализовать эндпоинт для регистрации пользователей (библиотекарей) с
email и password. Пароль должен храниться в хешированном виде.
○ Реализовать эндпоинт для входа пользователей, который по email и
password возвращает JWT access token.
○ Все последующие операции по управлению книгами, читателями (кроме
регистрации/логина самого читателя, если бы он был отдельной сущностью
с логином), выдаче и возврату должны быть защищены JWT.
2. Управление книгами (Защищено JWT):
○ CRUD операции для книг (Создание, Чтение, Обновление, Удаление).
○ Поля книги:
■ ID (автоматически генерируемый)
■ Название (строка, обязательное)
■ Автор (строка, обязательное)
■ Год публикации (число, необязательное)
■ ISBN (строка, должен быть уникальным, необязательное)
■ Количество экземпляров (число, по умолчанию 1, не может быть
меньше 0)
3. Управление читателями (Защищено JWT, кроме регистрации/логина, если бы
они были):
○ CRUD операции для читателей.
○ Поля читателя:
■ ID (автоматически генерируемый)
■ Имя (строка, обязательное)
■ Email (строка, должен быть уникальным, обязательное)
■ Примечание: В рамках этого задания читатели не имеют
собственных паролей и не логинятся в систему. Ими управляют
аутентифицированные пользователи (библиотекари).
4. Выдача и возврат книг (Защищено JWT):
○ Эндпоинт для выдачи книги читателю:
■ Принимает book_id и reader_id.
■ Бизнес-логика 1: Книгу можно выдать, только если есть доступные
экземпляры (количество экземпляров > 0). При выдаче
количество экземпляров уменьшается на 1.
■ Фиксируется факт выдачи (например, в отдельной таблице
BorrowedBooks с полями id, book_id, reader_id, borrow_date,
return_date (изначально NULL)).
■ Бизнес-логика 2: Один читатель не может взять более 3-х книг
одновременно.
○ Эндпоинт для возврата книги читателем:
■ Принимает book_id и reader_id (или borrow_id если используете
отдельную таблицу).
■ При возврате количество экземпляров соответствующей книги
увеличивается на 1.
■ В записи о выдаче проставляется return_date.
■ Бизнес-логика 3: Нельзя вернуть книгу, которая не была выдана
этому читателю или уже возвращена.
5. Получение информации:
○ Эндпоинт для получения списка всех книг (может быть публичным или
защищенным JWT – на ваше усмотрение, но объясните свой выбор в
README).
○ Эндпоинт для получения списка всех книг, взятых конкретным читателем (и
еще не возвращенных) (Защищено JWT).
